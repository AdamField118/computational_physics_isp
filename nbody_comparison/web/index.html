<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N-Body Simulation: Multi-Language Performance Comparison</title>
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="title">N-Body Gravitational Simulation</h1>
            <p class="subtitle">Multi-Language Performance Comparison: JAX (GPU) ¬∑ Fortran ¬∑ C ¬∑ C++ ¬∑ Python</p>
            <p class="author">Adam Field | Computational Physics ISP | Worcester Polytechnic Institute</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <a href="#overview" class="nav-link active">Overview</a>
            <a href="#performance" class="nav-link">Performance</a>
            <a href="#visualizations" class="nav-link">Visualizations</a>
            <a href="#simulation" class="nav-link">Live Demo</a>
            <a href="#about" class="nav-link">About</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            
            <!-- Overview Section -->
            <section id="overview" class="section">
                <h2 class="section-title">Project Overview</h2>
                
                <div class="overview-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>üéØ Objective</h3>
                        </div>
                        <div class="card-body">
                            <p>Implement the same gravitational N-body simulation in <strong>five different languages</strong> and compare their performance characteristics on CPU and GPU architectures.</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üî¨ Physics</h3>
                        </div>
                        <div class="card-body">
                            <p>Simulates gravitational interactions between N particles using the <strong>Velocity Verlet</strong> integrator, which conserves energy to within 0.01% over 1000 timesteps.</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üíª Implementations</h3>
                        </div>
                        <div class="card-body">
                            <ul class="implementation-list">
                                <li><span class="badge badge-jax">JAX (GPU)</span> GPU-accelerated with JIT compilation</li>
                                <li><span class="badge badge-fortran">Fortran</span> OpenMP parallelized on CPU</li>
                                <li><span class="badge badge-cpp">C++</span> Modern C++ with pybind11</li>
                                <li><span class="badge badge-c">C</span> Pure C with ctypes wrapper</li>
                                <li><span class="badge badge-python">Python</span> NumPy baseline</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üìä Key Finding</h3>
                        </div>
                        <div class="card-body">
                            <p class="highlight">At N=1000 particles: JAX (GPU) is <strong class="speedup">1384√ó</strong> faster than Python and <strong class="speedup">17√ó</strong> faster than Fortran!</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-particles">-</div>
                        <div class="stat-label">Max Particles Tested</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-steps">-</div>
                        <div class="stat-label">Timesteps per Benchmark</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="energy-conservation">-</div>
                        <div class="stat-label">Energy Conservation</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="gpu-speedup">-</div>
                        <div class="stat-label">GPU Speedup (N=1000)</div>
                    </div>
                </div>
            </section>

            <!-- Performance Section -->
            <section id="performance" class="section">
                <h2 class="section-title">Performance Analysis</h2>

                <!-- Performance Charts -->
                <div class="chart-grid">
                    <div class="chart-container">
                        <h3 class="chart-title">Scaling: Time per Step vs N</h3>
                        <canvas id="scalingChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3 class="chart-title">Speedup vs Python Baseline</h3>
                        <canvas id="speedupChart"></canvas>
                    </div>
                </div>

                <!-- Performance Table -->
                <div class="card">
                    <div class="card-header">
                        <h3>üìã Detailed Performance Results</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="performance-table" id="performanceTable">
                                <thead>
                                    <tr>
                                        <th>Implementation</th>
                                        <th>N=10</th>
                                        <th>N=50</th>
                                        <th>N=100</th>
                                        <th>N=500</th>
                                        <th>N=1000</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <p class="table-note">All times in milliseconds per timestep</p>
                    </div>
                </div>

                <!-- Energy Conservation -->
                <div class="card">
                    <div class="card-header">
                        <h3>‚ö° Energy Conservation Quality</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="energyChart"></canvas>
                        <p class="chart-note">All implementations conserve energy to < 0.01% for N=50 over 1000 steps, validating the Velocity Verlet integrator.</p>
                    </div>
                </div>
            </section>

            <!-- Visualizations Section -->
            <section id="visualizations" class="section">
                <h2 class="section-title">Trajectory Visualizations</h2>

                <div class="viz-grid">
                    <div class="viz-card">
                        <h3>2D Trajectory Animation</h3>
                        <img src="data/nbody_2d.gif" alt="2D N-body trajectory animation" class="viz-image" onerror="this.src='data/trajectory_snapshots.png'">
                        <p class="viz-caption">Particle trajectories in the XY plane showing gravitational interactions</p>
                    </div>

                    <div class="viz-card">
                        <h3>Energy Conservation</h3>
                        <img src="data/energy_conservation.png" alt="Energy conservation plot" class="viz-image">
                        <p class="viz-caption">Kinetic, potential, and total energy evolution over time</p>
                    </div>

                    <div class="viz-card">
                        <h3>Scaling Analysis</h3>
                        <img src="data/comprehensive_scaling.png" alt="Comprehensive scaling analysis" class="viz-image">
                        <p class="viz-caption">Performance scaling showing O(N¬≤) complexity</p>
                    </div>

                    <div class="viz-card">
                        <h3>GPU Crossover Analysis</h3>
                        <img src="data/crossover_analysis.png" alt="GPU crossover analysis" class="viz-image">
                        <p class="viz-caption">GPU becomes faster than CPU at N ‚âà 75-100 particles</p>
                    </div>
                </div>
            </section>

            <!-- Interactive Simulation Section -->
            <section id="simulation" class="section">
                <h2 class="section-title">Interactive 3D Visualization</h2>

                <div class="card">
                    <div class="card-body">
                        <div id="threejs-container"></div>
                        
                        <div class="controls">
                            <div class="control-group">
                                <label for="particle-count">Number of Particles: <span id="particle-count-value">50</span></label>
                                <input type="range" id="particle-count" min="10" max="200" value="50" step="10">
                            </div>
                            
                            <div class="control-group">
                                <label for="speed-control">Animation Speed: <span id="speed-value">1.0</span>√ó</label>
                                <input type="range" id="speed-control" min="0.1" max="3.0" value="1.0" step="0.1">
                            </div>

                            <div class="button-group">
                                <button id="start-sim" class="btn btn-primary">Start Simulation</button>
                                <button id="pause-sim" class="btn btn-secondary">Pause</button>
                                <button id="reset-sim" class="btn btn-secondary">Reset</button>
                            </div>
                        </div>

                        <p class="sim-note">
                            ‚ö†Ô∏è Note: This is a simple browser-based visualization. For high-performance simulations with N > 1000, use the Python/JAX implementation on GPU.
                        </p>
                    </div>
                </div>
            </section>

            <!-- About Section -->
            <section id="about" class="section">
                <h2 class="section-title">About This Project</h2>

                <div class="about-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>üéì Academic Context</h3>
                        </div>
                        <div class="card-body">
                            <p><strong>Course:</strong> Computational Physics Independent Study (ISP)</p>
                            <p><strong>Institution:</strong> Worcester Polytechnic Institute</p>
                            <p><strong>Student:</strong> Adam Field</p>
                            <p><strong>Date:</strong> January 2026</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üõ†Ô∏è Technologies Used</h3>
                        </div>
                        <div class="card-body">
                            <ul>
                                <li><strong>JAX:</strong> GPU acceleration with JIT compilation</li>
                                <li><strong>Fortran:</strong> f2py wrapper with OpenMP</li>
                                <li><strong>C++:</strong> pybind11 for Python bindings</li>
                                <li><strong>C:</strong> ctypes wrapper</li>
                                <li><strong>Python:</strong> NumPy, Matplotlib, SciPy</li>
                                <li><strong>Web:</strong> Three.js, Chart.js, vanilla JavaScript</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üìö Key Learning Outcomes</h3>
                        </div>
                        <div class="card-body">
                            <ul>
                                <li>Numerical integration methods (Velocity Verlet)</li>
                                <li>GPU programming and parallelization</li>
                                <li>Language interoperability (Python ‚Üî C/C++/Fortran)</li>
                                <li>Performance benchmarking and profiling</li>
                                <li>Scientific visualization</li>
                                <li>Computational complexity analysis</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üîó Resources</h3>
                        </div>
                        <div class="card-body">
                            <p><strong>Repository:</strong> <code>computational_physics_isp/nbody_comparison/</code></p>
                            <p><strong>Documentation:</strong> See <code>docs/theory.md</code> and <code>docs/results.md</code></p>
                            <p><strong>Test Suite:</strong> <code>tests/test_accuracy.py</code></p>
                            <p><strong>Contact:</strong> adfield@wpi.edu</p>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 Adam Field | Worcester Polytechnic Institute</p>
            <p>Computational Physics Independent Study Project</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/nbody_viz.js"></script>
</body>
</html>